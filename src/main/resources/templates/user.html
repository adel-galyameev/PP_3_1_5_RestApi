<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"s
      lang="en"
      style="height: 100%">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Users</title>
</head>
<body style="background-color: #f8f9fa ; height: 100%">
<nav style="color: white" class="navbar navbar-dark bg-dark">
    <span th:text="${user.getEmail()} +' with roles: ' + ${user.roleToString()}"/>
    <form class="form-inline">
        <a style="color: gray" class="navbar-brand" href='/logout'>logout</a>
    </form>
</nav>

<div class="container-fluid h-100 d-flex">

    <div class="row w-100 h-100">

        <div  style="background-color: white; padding-left: 0; padding-top: 10px; padding-right: 0" class="col-sm">
            <div th:each="role: ${user.getRoles()}" th:if="${role.toString()}=='ADMIN'">
                <a style="border: 0; padding-right: 155px; background-color: white; color: blue" type="button" class="btn btn-outline-secondary btn-block " href="/admin/users">Admin</a>
            </div>

            <button style="padding-right: 170px" class="btn btn-primary btn-block" onclick="window.location.href='/user'">User</button>
        </div>

        <div class="col-sm-10">
            <h1>User information-page</h1>

            <div style="background-color: white; border: 1px solid #ccc;border-radius: 5px;" class="tab-content">
                <div id="userstable" class="tab-pane fade show active">

                    <nav  class="navbar navbar-light bg-light">
                        <span class="navbar-brand mb-0 h1">About user</span>
                    </nav>
                    <div class="container-fluid mt-3 mb-3">
                        <table class="table table-striped">
                            <thead>
                            <tr>
                                <th scope="col">ID</th>
                                <th scope="col">First name</th>
                                <th scope="col">Last name</th>
                                <th scope="col">age</th>
                                <th scope="col">email</th>
                                <th scope="col">role</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr th:object="${user}">
                                <td th:text="${user.getId()}"></td>
                                <td th:text="${user.getUsername()}"></td>
                                <td th:text="${user.getName()}"></td>
                                <td th:text="${user.getAge()}"></td>
                                <td th:text="${user.getEmail()}"></td>
                                <td><th:block th:each="userRole : ${user.getRoles()}">
                                    <span class="align-middle" th:text="${userRole.toString()}"></span>
                                </th:block></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>

        </div>

    </div>

</div>

<!--<table border="1">
  <tr>
    <th>id</th>
    <th>name</th>
    <th>age</th>
    <th>email</th>
    <th colspan="2">operations</th>
  </tr>
  <tr th:each="user : ${users}">
    <td th:text="${user.getId()}"></td>
    <td th:text="${user.getName()}"></td>
    <td th:text="${user.getAge()}"></td>
    <td th:text="${user.getEmail()}"></td>
    <td><a th:href="@{/admin/users/{id}(id=${user.getId()})}">
      <input type="submit" value="update">
    </a>
    </td>
    <td>
      <form th:method="DELETE" th:action="@{/admin/users/{id}(id=${user.getId()})}">
        <input type="submit" value="delete">
      </form>
    </td>
  </tr>
</table>

<br>

<input type="button" value="Add User"
       onclick="window.location.href='/admin/new'"/>

<br>

<input type="button" value="logout"
       onclick="window.location.href='/logout'"/>-->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>
</html>